<!-- Views/TranslationTabView.axaml -->
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ae="clr-namespace:AvaloniaEdit;assembly=AvaloniaEdit"
             x:Class="CbetaTranslator.App.Views.TranslationTabView">

	<UserControl.Styles>
		<StyleInclude Source="avares://AvaloniaEdit/Themes/Fluent/AvaloniaEdit.xaml" />
		<Style Selector="ae|TextEditor">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFg}"/>
		</Style>
	</UserControl.Styles>

	<Grid RowDefinitions="Auto,*">
		<Border Grid.Row="0"
				Background="{DynamicResource BarBg}"
				BorderBrush="{DynamicResource BorderBrush}"
				BorderThickness="1"
				Padding="8"
				CornerRadius="6">

			<!-- top toolbar area -->
			<Grid RowDefinitions="Auto,Auto" RowSpacing="8">

				<!-- Row 1: Modes + quick info + wrap -->
				<Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
					<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="6">
						<Button Name="BtnModeHead" Content="Head of File" ToolTip.Tip="Switch to header projection (Ctrl+1)"/>
						<Button Name="BtnModeBody" Content="Body of File" ToolTip.Tip="Switch to body projection (Ctrl+2)"/>
						<Button Name="BtnModeNotes" Content="Notes" ToolTip.Tip="Switch to notes projection (Ctrl+3)"/>
						<Button Name="BtnFindChineseInEn"
								Content="Find Chinese in EN"
								ToolTip.Tip="Find Chinese characters in EN lines and select the EN text (Ctrl+Shift+F). Use this to find the last Chinese characters that prevent your translation from registering as complete."/>
					</StackPanel>

					<TextBlock Grid.Column="1"
							   Name="TxtQuickInfo"
							   Text=""
							   VerticalAlignment="Center"
							   HorizontalAlignment="Left"
							   Opacity="0.8"
							   TextTrimming="CharacterEllipsis"
							   Margin="8,0,0,0"/>

					<StackPanel Grid.Column="2"
								Orientation="Horizontal"
								Spacing="8"
								VerticalAlignment="Center">
						<CheckBox Name="ChkWrap" Content="Wrap" ToolTip.Tip="Toggle line wrapping"/>
					</StackPanel>
				</Grid>

				<!-- Row 2: Actions (wraps nicely on smaller windows) -->
				<WrapPanel Grid.Row="1"
						   Orientation="Horizontal"
						   ItemSpacing="6"
						   LineSpacing="6"
						   VerticalAlignment="Top">

					<Button Name="BtnUndo" Content="↶" Width="32" ToolTip.Tip="Undo (Ctrl+Z)"/>
					<Button Name="BtnRedo" Content="↷" Width="32" ToolTip.Tip="Redo (Ctrl+Y)"/>

					<Border Width="8"/>

					<TextBlock Text="Copy N:" VerticalAlignment="Center"/>
					<ComboBox Name="CmbChunkSize" Width="72" SelectedIndex="1" ToolTip.Tip="How many blocks max to copy">
						<ComboBoxItem Content="1"/>
						<ComboBoxItem Content="10"/>
						<ComboBoxItem Content="25"/>
						<ComboBoxItem Content="50"/>
						<ComboBoxItem Content="100"/>
						<ComboBoxItem Content="150"/>
					</ComboBox>

					<Button Name="BtnCopyChunkPrompt"
							Content="Copy N + prompt"
							ToolTip.Tip="Copy up to N valid untranslated blocks from the caret (Ctrl+Shift+C)"/>

					<Button Name="BtnPasteByNumber"
							Content="Paste by block #"
							ToolTip.Tip="Paste clipboard blocks and replace EN lines by matching block number (Ctrl+Shift+V)"/>

					<Button Name="BtnNextUntranslated"
							Content="Next untranslated"
							ToolTip.Tip="Jump to next untranslated Chinese block (F8)"/>

					<Border Width="8"/>

					<Button Name="BtnSave" Content="Save XML" ToolTip.Tip="Apply projection edits and save XML (Ctrl+S)"/>
					<Button Name="BtnRevert" Content="Revert from XML" ToolTip.Tip="Reload projection from XML (Ctrl+R)"/>
				</WrapPanel>

			</Grid>
		</Border>

		<Border Grid.Row="1"
				Margin="0,8,0,0"
				Background="{DynamicResource XmlViewerBg}"
				BorderBrush="{DynamicResource XmlViewerBorder}"
				BorderThickness="1"
				CornerRadius="6">
			<Grid RowDefinitions="Auto,*">
				<Border BorderThickness="0,0,0,1"
						BorderBrush="{DynamicResource XmlViewerBorder}"
						Padding="8">
					<TextBlock Name="TxtModeInfo" Text="Translation Editor"/>
				</Border>

				<ae:TextEditor Name="EditorProjection"
							   Grid.Row="1"
							   FontFamily="Consolas"
							   ShowLineNumbers="False"
							   WordWrap="False"/>
			</Grid>
		</Border>
	</Grid>
</UserControl>
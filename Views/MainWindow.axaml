<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:CbetaTranslator.App.Views"
        xmlns:models="clr-namespace:CbetaTranslator.App.Models"
        x:Class="CbetaTranslator.App.Views.MainWindow"
        Width="1400"
        Height="900"
        Title="CBETA Translator">

	<Grid RowDefinitions="Auto,*,Auto">

		<!-- Top Bar -->
		<Border Grid.Row="0"
				Name="TopBar"
				Background="{DynamicResource BarBg}"
				Padding="10">

			<DockPanel LastChildFill="True">

				<StackPanel Orientation="Horizontal"
							Spacing="8"
							DockPanel.Dock="Left">

					<Button Name="BtnToggleNav" Width="40" Height="32" Content="☰"/>
					<Button Name="BtnOpenRoot" Width="140" Height="32" Content="Open Root"/>
					<Button Name="BtnSettings" Width="110" Height="32" Content="⚙ Settings"/>
					<Button Name="BtnLicenses" Width="110" Height="32" Content="ⓘ Licenses"/>

					<TextBlock Name="TxtRoot"
							   Margin="10,0,0,0"
							   Classes="muted"/>

				</StackPanel>

				<TextBlock Name="TxtCurrentFile"
						   DockPanel.Dock="Right"
						   Classes="muted"/>

			</DockPanel>
		</Border>

		<!-- Main -->
		<Grid Grid.Row="1" ColumnDefinitions="Auto,*">

			<!-- Nav -->
			<Border Name="NavPanel"
					Grid.Column="0"
					Background="{DynamicResource NavBg}"
					Width="320">

				<Grid Margin="8"
					  RowDefinitions="Auto,Auto,Auto,*"
					  RowSpacing="8">

					<Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="8">
						<TextBlock Text="Files"
								   FontWeight="Bold"
								   Classes="muted"
								   VerticalAlignment="Center"/>

						<ComboBox Name="CmbStatusFilter"
								  Grid.Column="1"
								  SelectedIndex="0"
								  MinWidth="160">
							<ComboBoxItem Content="All"/>
							<ComboBoxItem Content="Translated (Green)"/>
							<ComboBoxItem Content="Partially translated (Yellow)"/>
							<ComboBoxItem Content="Untranslated (Red)"/>
						</ComboBox>
					</Grid>

					<TextBox Name="NavSearch"
							 Grid.Row="1"
							 Watermark="Search (filename or title)…"/>

					<StackPanel Grid.Row="2"
								Orientation="Horizontal"
								Spacing="10">
						<CheckBox Name="ChkShowFilenames"
								  Content="Show filenames"/>
						<CheckBox Name="ChkZenOnly"
								  Content="Zen texts"/>
					</StackPanel>

					<ListBox Name="FilesList"
							 Grid.Row="3"
							 Background="{DynamicResource ControlBg}"
							 BorderBrush="{DynamicResource BorderBrush}"
							 BorderThickness="1">

						<ListBox.ItemTemplate>
							<DataTemplate x:DataType="models:FileNavItem">
								<Border CornerRadius="6"
										Padding="6"
										Margin="4"
										Background="{Binding Status, Converter={x:Static views:NavStatusToBrushConverter.Instance}}">
									<TextBlock Text="{Binding DisplayShort}"
											   ToolTip.Tip="{Binding Tooltip}"
											   TextWrapping="NoWrap"/>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>

					</ListBox>

				</Grid>
			</Border>

			<!-- Tabs -->
			<Border Grid.Column="1" Margin="8">
				<TabControl Name="MainTabs">
					<TabItem Header="Readable">
						<views:ReadableTabView Name="ReadableView"/>
					</TabItem>

					<TabItem Header="Translate XML">
						<views:TranslationTabView Name="TranslationView"/>
					</TabItem>

					<TabItem Header="Search">
						<views:SearchTabView Name="SearchView"/>
					</TabItem>

					<TabItem Header="Git">
						<views:GitTabView Name="GitView"/>
					</TabItem>
				</TabControl>
			</Border>

		</Grid>

		<!-- Status -->
		<Border Grid.Row="2"
				Background="{DynamicResource BarBg}"
				Padding="8">
			<TextBlock Name="TxtStatus" Classes="muted"/>
		</Border>

	</Grid>
</Window>
